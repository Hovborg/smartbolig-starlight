---
title: Home Assistant i Docker
description: KÃ¸r Home Assistant Container med Docker Compose. Perfekt til eksisterende servere.
sidebar:
  badge:
    text: Avanceret
    variant: caution
---

import { Steps, Aside, Tabs, TabItem, Card, CardGrid, Badge } from '@astrojs/starlight/components';

<Badge text="Medium" variant="caution" /> <Badge text="20 min" variant="note" /> <Badge text="Gratis" variant="success" />

Docker er den fleksible mÃ¥de at kÃ¸re Home Assistant pÃ¥. Perfekt hvis du allerede har en server eller NAS kÃ¸rende.

![Docker arkitektur diagram](/images/guides/docker-installation/architecture.svg)

## ğŸ¤” Er Docker det rigtige valg?

### âœ… VÃ¦lg Docker hvis du:

- Har en eksisterende server/NAS
- Vil kÃ¸re andre tjenester (Plex, Nextcloud, osv.)
- ForetrÃ¦kker manuel kontrol
- Kender Docker i forvejen

### âŒ VÃ¦lg Home Assistant OS hvis du:

- Er ny til Home Assistant
- Vil have alt til at "bare virke"
- Har brug for Add-ons (Zigbee2MQTT, Node-RED, osv.)

<Aside type="tip">
Ny til Home Assistant? Start med [Raspberry Pi installation](/da/home-assistant/raspberry-pi-installation/) - det er meget nemmere.
</Aside>

## ğŸ“‹ ForudsÃ¦tninger

- âœ… Linux server (Ubuntu, Debian, eller lignende)
- âœ… Docker installeret
- âœ… GrundlÃ¦ggende terminal-kendskab

## âš™ï¸ Installer Docker

<Tabs>
  <TabItem label="Ubuntu/Debian">
    ```bash
    # Opdater pakkeliste
    sudo apt update && sudo apt upgrade -y

    # Installer Docker med officielt script
    curl -fsSL https://get.docker.com | sh

    # TilfÃ¸j din bruger til docker gruppen
    sudo usermod -aG docker $USER

    # Log ud og ind igen (eller kÃ¸r):
    newgrp docker

    # Verificer installation
    docker --version
    docker compose version
    ```
  </TabItem>
  <TabItem label="Synology NAS">
    1. Ã…bn **Package Center**
    2. SÃ¸g efter **"Container Manager"** (tidligere Docker)
    3. Klik **Install**
    4. FortsÃ¦t med Docker Compose metoden nedenfor
  </TabItem>
</Tabs>

## ğŸ“ Opret mappestruktur

```bash
# Opret mapper
mkdir -p ~/docker/homeassistant/config
cd ~/docker/homeassistant
```

Din struktur:
```
~/docker/
â””â”€â”€ homeassistant/
    â”œâ”€â”€ config/          â† Her gemmes alle HA filer
    â””â”€â”€ docker-compose.yml
```

## ğŸ“ Docker Compose fil

Opret filen `docker-compose.yml`:

```yaml title="docker-compose.yml"
services:
  homeassistant:
    container_name: homeassistant
    image: ghcr.io/home-assistant/home-assistant:stable
    volumes:
      - ./config:/config
      - /etc/localtime:/etc/localtime:ro
      - /run/dbus:/run/dbus:ro
    restart: unless-stopped
    privileged: true
    network_mode: host
    environment:
      - TZ=Europe/Copenhagen
```

<Aside type="note" title="Hvorfor network_mode: host?">
Home Assistant scanner dit netvÃ¦rk for enheder (mDNS, SSDP). Med `host` networking virker auto-discovery. Uden det finder HA ikke dine enheder automatisk.
</Aside>

## ğŸš€ Start Home Assistant

```bash
# Start i baggrunden
docker compose up -d

# FÃ¸lg logs (Ctrl+C for at stoppe)
docker compose logs -f homeassistant
```

Ã…bn derefter: `http://DIN-SERVER-IP:8123`

<Aside type="tip">
FÃ¸rste opstart tager 2-5 minutter. Du ser "Preparing Home Assistant" indtil det er klar.
</Aside>

## ğŸ”§ Nyttige kommandoer

```bash
# Se status
docker compose ps

# Se logs
docker compose logs -f homeassistant

# Genstart
docker compose restart homeassistant

# Stop
docker compose down

# Opdater til nyeste version
docker compose pull
docker compose up -d

# Se ressourceforbrug
docker stats homeassistant
```

## ğŸ”Œ USB-enheder (Zigbee stick)

Hvis du har en Zigbee USB stick eller lignende:

<Steps>
1. **Find din enhed:**
   ```bash
   ls -la /dev/serial/by-id/
   ```
   
   Eksempel output:
   ```
   usb-Texas_Instruments_TI_CC2531_USB_CDC-if00 -> ../../ttyACM0
   ```

2. **TilfÃ¸j til docker-compose.yml:**
   ```yaml title="docker-compose.yml" {10-11}
   services:
     homeassistant:
       container_name: homeassistant
       image: ghcr.io/home-assistant/home-assistant:stable
       volumes:
         - ./config:/config
         - /etc/localtime:/etc/localtime:ro
       restart: unless-stopped
       network_mode: host
       devices:
         - /dev/ttyACM0:/dev/ttyACM0
   ```

3. **Genstart containeren:**
   ```bash
   docker compose down && docker compose up -d
   ```
</Steps>

## âš ï¸ BegrÃ¦nsninger vs Home Assistant OS

| Feature | Docker Container | Home Assistant OS |
|---------|------------------|-------------------|
| Add-ons (Z2M, Node-RED) | âŒ KÃ¸r separat | âœ… Integreret |
| Supervisor | âŒ Nej | âœ… Ja |
| Auto-backup | âŒ Manuel | âœ… Ja |
| Opdateringer | Manuel (`pull`) | âœ… Et klik |
| Fleksibilitet | â­â­â­ | â­â­ |

<Aside type="tip" title="Vil du have Add-ons?">
Du kan kÃ¸re Zigbee2MQTT, Node-RED osv. som separate Docker containers. Se vores [Zigbee2MQTT guide](/da/home-assistant/zigbee2mqtt/).
</Aside>

## ğŸ’¾ Backup

Docker Container har ikke automatisk backup. Lav det manuelt:

```bash
# Stop HA fÃ¸rst (valgfrit, men sikrere)
docker compose stop homeassistant

# Backup config mappen
tar -czvf homeassistant-backup-$(date +%Y%m%d).tar.gz config/

# Start HA igen
docker compose start homeassistant
```

<Aside type="caution">
Gem backups pÃ¥ en ANDEN disk/server. Hvis serveren dÃ¸r, mister du alt!
</Aside>

## ğŸ”§ Fejlfinding

<Aside type="tip" title="Container starter ikke?">
```bash
# Se logs for fejl
docker compose logs homeassistant

# Tjek at port 8123 ikke er i brug
sudo netstat -tulpn | grep 8123
```
</Aside>

<Aside type="tip" title="Kan ikke finde enheder automatisk?">
- Tjek at `network_mode: host` er sat
- Genstart containeren efter Ã¦ndringer
- Nogle enheder krÃ¦ver mDNS - tjek at avahi-daemon kÃ¸rer pÃ¥ host
</Aside>

<Aside type="tip" title="USB enhed virker ikke?">
- Tjek at device path er korrekt: `ls -la /dev/ttyUSB*` eller `/dev/ttyACM*`
- TilfÃ¸j din bruger til dialout gruppen: `sudo usermod -aG dialout $USER`
- Brug `privileged: true` i docker-compose hvis intet andet virker
</Aside>

## ğŸš€ NÃ¦ste skridt

<CardGrid>
  <Card title="ğŸ“¡ Zigbee2MQTT" icon="setting">
    KÃ¸r Zigbee2MQTT som Docker container sammen med HA.
    
    [OpsÃ¦t Zigbee2MQTT â†’](/da/home-assistant/zigbee2mqtt/)
  </Card>
  <Card title="âš¡ FÃ¸rste automation" icon="rocket">
    Lav din fÃ¸rste automation i Home Assistant.
    
    [Lav automationer â†’](/da/home-assistant/foerste-automation/)
  </Card>
</CardGrid>
