---
title: Z-Wave Guide til Home Assistant
description: Komplet Z-Wave guide - Z-Wave JS UI installation, coordinator valg, device pairing og netvÃ¦rksoptimering til Home Assistant.
sidebar:
  badge:
    text: Guide
    variant: note
---

import { Card, CardGrid, Aside, Badge, Tabs, TabItem, Steps } from '@astrojs/starlight/components';
import FAQ from '../../../../components/FAQ.astro';

<Badge text="Z-Wave" variant="tip" /> <Badge text="Home Assistant" variant="success" />

Z-Wave er en **pÃ¥lidelig trÃ¥dlÃ¸s protokol** til smart home med excellent rÃ¦kkevidde og mesh-netvÃ¦rk. Denne guide dÃ¦kker alt fra coordinator valg til avanceret netvÃ¦rksopsÃ¦tning!

<Aside type="tip" title="Z-Wave vs Zigbee">
**Z-Wave fordele:**
- FÃ¦rre enheder = mindre interferens
- Bedre interoperabilitet (certificering pÃ¥krÃ¦vet)
- LÃ¦ngere rÃ¦kkevidde per hop
- Long Range (op til 1.6 km med 800-serien)

**Zigbee fordele:**
- Flere producenter og enheder
- Generelt billigere
- Hurtigere opdateringsfrekvens
</Aside>

---

## ğŸ”Œ Coordinator Valg

### Anbefalede USB Sticks

| Coordinator | Serie | Long Range | Pris | Note |
|-------------|-------|------------|------|------|
| **Zooz ZST39** | 800 | âœ… (kun US) | ~$35 | Bedste vÃ¦rdi, pÃ¥lidelig |
| **Aeotec Z-Stick 7** | 700 | âŒ | ~$45 | Velkendt, stabil |
| **Aeotec Z-Stick 10 Pro** | 800 | âœ… | ~$60 | Dual: Z-Wave + Zigbee |
| **Home Assistant Connect ZWA-2** | 800 | âœ… | ~$30 | Officiel HA hardware |
| **HomeSeer SmartStick G8** | 800 | âœ… | ~$50 | God support |

<Aside type="caution" title="Z-Wave Long Range">
**Long Range** er kun tilgÃ¦ngelig i **US/CA/MX** pga. frekvensregulering. I Europa (868 MHz) fÃ¥r du stadig fordelene ved 800-serien: bedre rÃ¦kkevidde, lavere strÃ¸mforbrug og S2 sikkerhed.
</Aside>

### GPIO Moduler (til Raspberry Pi)

| Modul | Serie | Pris | Note |
|-------|-------|------|------|
| **Zooz ZAC93** | 800 | ~$30 | Til HA Yellow/Pi |
| **RaZberry 7 Pro** | 700 | ~$50 | GPIO header |

---

## ğŸ“¦ Installation

### Z-Wave JS Add-on (Anbefalet for begyndere)

<Steps>
1. GÃ¥ til **Settings â†’ Add-ons â†’ Add-on Store**

2. SÃ¸g efter **Z-Wave JS** og installer

3. Find din USB stick:
   - **Settings â†’ System â†’ Hardware â†’ â‹® â†’ All Hardware**
   - Brug `/dev/serial/by-id/...` stien (stabil)

4. Konfigurer add-on:
   ```yaml
   device: /dev/serial/by-id/usb-Silicon_Labs_...
   ```

5. Start add-on og tjek logs

6. GÃ¥ til **Settings â†’ Devices & Services**
   - Z-Wave integration opdages automatisk
</Steps>

### Z-Wave JS UI (Avanceret)

<Tabs>
  <TabItem label="HA Add-on">
    <Steps>
    1. TilfÃ¸j repository: `https://github.com/hassio-addons/repository`
    
    2. Installer **Z-Wave JS UI** add-on
    
    3. Konfigurer USB device
    
    4. Start og Ã¥bn Web UI (port 8091)
    
    5. Generer sikkerhedsnÃ¸gler:
       - S0 Legacy
       - S2 Authenticated
       - S2 Unauthenticated
       - S2 Access Control
    
    6. TilfÃ¸j Z-Wave integration i HA:
       - Websocket URL: `ws://a]0d7a0ddc-zwavejs2mqtt:3000`
    </Steps>
  </TabItem>
  <TabItem label="Docker">
    ```yaml
    # docker-compose.yml
    version: '3.7'
    services:
      zwave-js-ui:
        container_name: zwave-js-ui
        image: zwavejs/zwave-js-ui:latest
        restart: always
        tty: true
        stop_signal: SIGINT
        environment:
          - SESSION_SECRET=din-hemmelige-nÃ¸gle
          - TZ=Europe/Copenhagen
        devices:
          - '/dev/serial/by-id/usb-Silicon_Labs...:/dev/zwave'
        volumes:
          - ./zwave-config:/usr/src/app/store
        ports:
          - '8091:8091'  # Web UI
          - '3000:3000'  # WebSocket
    ```
  </TabItem>
</Tabs>

---

## ğŸ” SikkerhedsnÃ¸gler

### S2 Sikkerhedsklasser

| Klasse | Brug | Enheder |
|--------|------|---------|
| **S2 Access Control** | HÃ¸jeste sikkerhed | DÃ¸rlÃ¥se, garageporte |
| **S2 Authenticated** | HÃ¸j sikkerhed | Termostater, alarmer |
| **S2 Unauthenticated** | Basis sikkerhed | Sensorer, kontakter |
| **S0 Legacy** | Gammel protokol | Ã†ldre enheder |

### Generer Sikre NÃ¸gler

```bash
# Generer 16-byte hex nÃ¸gle (32 tegn)
cat /dev/urandom | tr -dc 'A-F0-9' | fold -w 32 | head -n 1
```

<Aside type="caution" title="Gem Dine NÃ¸gler!">
**VIGTIGT:** Backup dine sikkerhedsnÃ¸gler! Uden dem kan du ikke kommunikere med sikre enheder hvis du geninstallerer.

Gem dem sikkert (f.eks. password manager).
</Aside>

---

## â• TilfÃ¸j Enheder

### Standard Inclusion

<Steps>
1. Ã…bn Z-Wave JS UI eller HA integration

2. Klik **Add Device** / **Inclusion**

3. VÃ¦lg sikkerhedsniveau:
   - **Default** (anbefalet)
   - **S2** for maksimal sikkerhed
   - **No Security** for test

4. SÃ¦t enheden i inclusion mode (se manual)
   - Typisk: Tryk 1x pÃ¥ knap

5. Vent pÃ¥ interview (kan tage minutter)

6. Navngiv enheden
</Steps>

### SmartStart (QR Kode)

<Steps>
1. Find QR kode pÃ¥ enheden

2. GÃ¥ til **Add Device â†’ SmartStart**

3. Scan QR kode eller indtast DSK

4. Enheden tilfÃ¸jes automatisk nÃ¥r den tÃ¦ndes
</Steps>

### Exclusion (Fjern Enhed)

```yaml
# Vigtigt: Exclude enheder FÃ˜R du tilfÃ¸jer dem
# til nyt netvÃ¦rk - ogsÃ¥ selvom de aldrig var tilfÃ¸jet!
```

<Steps>
1. Klik **Remove Device** / **Exclusion**

2. SÃ¦t enheden i exclusion mode (se manual)

3. Vent pÃ¥ bekrÃ¦ftelse
</Steps>

---

## ğŸŒ NetvÃ¦rksoptimering

### Mesh NetvÃ¦rk GrundlÃ¦ggende

| Enhedstype | Funktion | Eksempler |
|------------|----------|-----------|
| **Controller** | NetvÃ¦rkets centrum | USB stick |
| **Router** | Udvider mesh | Dimmere, kontakter (strÃ¸m) |
| **End Device** | Kan ikke route | Batterisensorer |

### Placering Tips

```
Optimal:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         [Router]           â”‚
â”‚            â”‚               â”‚
â”‚ [Router]â”€â”€[Controller]â”€â”€[Router] â”‚
â”‚            â”‚               â”‚
â”‚         [Router]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UndgÃ¥:
- Controller i hjÃ¸rne
- Lange kÃ¦der uden routere
- Enheder bag metal/vand
```

### Heal Network / Rebuild Routes

```bash
# Kun nÃ¥r nÃ¸dvendigt:
# - Efter flytning af enheder
# - Ved vedvarende problemer

# IKKE regelmÃ¦ssigt - genererer meget trafik
```

I Z-Wave JS UI: **Settings â†’ Rebuild Routes**

---

## ğŸ”§ Avanceret Konfiguration

### Device Configuration

```yaml
# I Z-Wave JS UI kan du Ã¦ndre:
# - Wake-up interval (batterisensorer)
# - Report intervals
# - LED indikator
# - Association groups
```

### Association Groups

Tillader direkte kommunikation mellem enheder:

```yaml
# Eksempel: Kontakt styrer lampe direkte
# Group 2 (Basic Set) â†’ Lampe node ID

# Fordele:
# - Virker uden controller
# - Ultra-hurtig respons
# - PÃ¥lidelig

# Ulemper:
# - SvÃ¦rt at administrere
# - Ingen HA automation
```

### Firmware Opdatering

```yaml
# Z-Wave JS UI â†’ Device â†’ Firmware Update
# Upload .otz eller .hex fil fra producent
# VIGTIGT: Brug kun officiel firmware!
```

---

## ğŸ” Troubleshooting

### Enhed Svarer Ikke

<Steps>
1. Tjek **Node Statistics** i Z-Wave JS UI
   - RTT (round-trip time) over 1000ms = problem

2. **Ping** enheden for at teste forbindelse

3. **Re-interview** enheden:
   - Device â†’ Re-interview

4. Tjek batteriniveau (for batteridrevne)

5. Overvej at tilfÃ¸je router mellem enhed og controller
</Steps>

### Dead Nodes

```yaml
# Symptomer:
# - Enhed markeret som "Dead"
# - Ingen respons

# LÃ¸sninger:
1. Vent 24 timer (kan vÃ¥gne)
2. Tryk fysisk pÃ¥ enheden
3. Remove Failed Node (hvis permanent dÃ¸d)
```

### Network Map

I Z-Wave JS UI: **Network â†’ Map**

Viser:
- Alle enheder og forbindelser
- Signalstyrke
- Routing paths

---

## ğŸ“Š Z-Wave vs Zigbee Sammenligning

| Feature | Z-Wave | Zigbee |
|---------|--------|--------|
| **Frekvens** | 868 MHz (EU) | 2.4 GHz |
| **Interferens** | Minimal | WiFi overlap muligt |
| **Max enheder** | 232 | 65.000+ |
| **Max hops** | 4 | UbegrÃ¦nset |
| **Certificering** | PÃ¥krÃ¦vet | Valgfri |
| **Pris** | HÃ¸jere | Lavere |
| **Long Range** | Ja (800-serien) | Nej |

---

## â“ Ofte Stillede SpÃ¸rgsmÃ¥l

<FAQ questions={[
  {
    question: "Skal jeg vÃ¦lge Z-Wave JS eller Z-Wave JS UI?",
    answer: "Z-Wave JS er simplere og integreret direkte i HA. Z-Wave JS UI giver mere kontrol, MQTT support og bedre debugging. For de fleste er Z-Wave JS nok."
  },
  {
    question: "Kan jeg migrere fra 500/700-serien til 800-serien?",
    answer: "Ja! Du kan backup/restore netvÃ¦rket via Z-Wave JS UI. Dog krÃ¦ver det specifik firmware-version (7.19.0+). Tjek dokumentation for din nye stick."
  },
  {
    question: "Hvorfor ser jeg ikke alle entiteter?",
    answer: "Vent pÃ¥ at interview er fÃ¦rdigt (kan tage flere minutter). Hvis stadig mangler: Re-interview enheden. Nogle enheder krÃ¦ver wake-up fÃ¸rst (tryk pÃ¥ knap)."
  },
  {
    question: "Er Z-Wave Long Range vÃ¦rd at vente pÃ¥ i Europa?",
    answer: "Nej, Long Range er kun US/CA/MX pga. frekvensregulering. Men 800-serien har stadig bedre rÃ¦kkevidde, lavere strÃ¸mforbrug og nyeste sikkerhed i Europa."
  }
]} />

---

## ğŸ“š NÃ¦ste Skridt

<CardGrid>
  <Card title="Zigbee2MQTT" icon="seti:arduino">
    Alternativ protokol til smart home.
    
    [Se guide â†’](/da/home-assistant/zigbee2mqtt/)
  </Card>
  <Card title="Automationer" icon="rocket">
    Brug Z-Wave enheder i automationer.
    
    [Se guide â†’](/da/home-assistant/foerste-automation/)
  </Card>
</CardGrid>

---

*Sidst opdateret: December 2025*
