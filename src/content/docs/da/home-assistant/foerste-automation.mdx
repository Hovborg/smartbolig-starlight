---
title: Din fÃ¸rste automation
description: Lav din fÃ¸rste Home Assistant automation fra bunden. TÃ¦nd lyset automatisk nÃ¥r du kommer hjem.
sidebar:
  badge:
    text: Essentiel
    variant: tip
---

import { Steps, Aside, Tabs, TabItem, Card, CardGrid, Badge } from '@astrojs/starlight/components';

<Badge text="Let" variant="success" /> <Badge text="15 min" variant="note" />

Nu begynder det sjove! Automationer er grunden til at vi gider alt det her. At lyset tÃ¦nder nÃ¥r du kommer hjem. At varmen skruer ned nÃ¥r du gÃ¥r.

## ğŸ§  SÃ¥dan virker automationer

Alle automationer har tre dele:

![Automation koncept diagram](/images/guides/foerste-automation/concept.svg)

**TÃ¦nk pÃ¥ det som:** "NÃ¥r X sker, og hvis Y er sandt, sÃ¥ gÃ¸r Z."

## ğŸŒ… Eksempel 1: Lys ved solnedgang

Den klassiske fÃ¸rste automation!

<Tabs>
  <TabItem label="ğŸ“± Via UI (nemmest)">
    <Steps>
    1. GÃ¥ til **Indstillinger** â†’ **Automatiseringer og scener**
    
    2. Klik **Opret automatisering** â†’ **Opret ny automatisering**
    
    3. **Trigger:** 
       - Klik **"TilfÃ¸j trigger"**
       - VÃ¦lg **"Sol"**
       - VÃ¦lg **"Solnedgang"**
    
    4. **Handling:**
       - Klik **"TilfÃ¸j handling"**
       - VÃ¦lg **"Enhed"**
       - Find din lampe
       - VÃ¦lg **"TÃ¦nd"**
    
    5. **Gem** med navnet "TÃ¦nd stuelys ved solnedgang"
    </Steps>
  </TabItem>
  <TabItem label="ğŸ“ YAML">
    ```yaml title="automations.yaml"
    - alias: "TÃ¦nd stuelys ved solnedgang"
      description: "TÃ¦nder automatisk lyset nÃ¥r solen gÃ¥r ned"
      trigger:
        - platform: sun
          event: sunset
          offset: "-00:30:00"  # 30 min FÃ˜R solnedgang
      action:
        - service: light.turn_on
          target:
            entity_id: light.stue_loft
          data:
            brightness_pct: 80
      mode: single
    ```
  </TabItem>
</Tabs>

## ğŸš¶ Eksempel 2: Lys ved bevÃ¦gelse (kun om natten)

```yaml title="automations.yaml"
- alias: "Gang lys ved bevÃ¦gelse (nat)"
  description: "TÃ¦nder svagt lys i gangen om natten"
  trigger:
    - platform: state
      entity_id: binary_sensor.gang_bevaegelse
      to: "on"
  condition:
    - condition: time
      after: "22:00:00"
      before: "07:00:00"
  action:
    - service: light.turn_on
      target:
        entity_id: light.gang
      data:
        brightness_pct: 20  # Svagt lys om natten
    - delay:
        minutes: 2
    - service: light.turn_off
      target:
        entity_id: light.gang
  mode: restart  # Genstarter timer ved ny bevÃ¦gelse
```

<Aside type="tip" title="Hvad gÃ¸r mode: restart?">
Hvis du bevÃ¦ger dig igen inden de 2 minutter, starter timeren forfra. Ellers ville lyset slukke mens du stadig er i gangen!
</Aside>

## ğŸ§º Eksempel 3: Vaskemaskine fÃ¦rdig

KrÃ¦ver smart stikkontakt med strÃ¸mmÃ¥ling (f.eks. IKEA TRETAKT eller Sonoff S31):

```yaml title="automations.yaml"
- alias: "Vaskemaskine fÃ¦rdig"
  description: "Sender besked nÃ¥r vasketÃ¸jet er fÃ¦rdigt"
  trigger:
    - platform: numeric_state
      entity_id: sensor.vaskemaskine_stromforbrug
      below: 5  # Watt
      for:
        minutes: 3  # Skal vÃ¦re lav i 3 min
  condition:
    - condition: numeric_state
      entity_id: sensor.vaskemaskine_stromforbrug
      above: 0.5  # Sikrer at den har kÃ¸rt
  action:
    - service: notify.mobile_app_min_telefon
      data:
        title: "ğŸ§º Vaskemaskine"
        message: "VasketÃ¸jet er fÃ¦rdigt!"
  mode: single
```

## ğŸŒ¡ï¸ Eksempel 4: Temperatur advarsel

```yaml title="automations.yaml"
- alias: "Lav temperatur advarsel"
  description: "Advarer hvis det bliver for koldt"
  trigger:
    - platform: numeric_state
      entity_id: sensor.stue_temperatur
      below: 18
      for:
        minutes: 10
  action:
    - service: notify.mobile_app_min_telefon
      data:
        title: "ğŸ¥¶ Koldt i stuen"
        message: "Temperaturen er faldet til {{ states('sensor.stue_temperatur') }}Â°C"
  mode: single
```

## ğŸ’¡ Tips til gode automationer

<CardGrid>
  <Card title="ğŸ¯ Start simpelt" icon="rocket">
    Lav Ã©n ting ad gangen. TilfÃ¸j fÃ¸rst betingelser nÃ¥r det basale virker.
  </Card>
  <Card title="ğŸ§ª Test grundigt" icon="approve-check">
    Brug **"KÃ¸r"** knappen til at teste handlingerne uden at vente pÃ¥ triggeren.
  </Card>
  <Card title="ğŸ“ Gode navne" icon="document">
    "TÃ¦nd udendÃ¸rslys ved solnedgang" er bedre end "Automation 1".
  </Card>
  <Card title="ğŸ¤” TÃ¦nk edge cases" icon="warning">
    Hvad hvis strÃ¸mmen gÃ¥r? Hvad hvis nogen allerede har tÃ¦ndt lyset?
  </Card>
</CardGrid>

## ğŸ”§ Debugging

<Aside type="tip" title="Automation virker ikke?">
**Tjek disse ting:**

1. **Entity ID** - Stavefejl er den hyppigste fejl!
   - Find korrekt ID under **UdviklervÃ¦rktÃ¸jer** â†’ **Tilstande**

2. **Logs** - Se fejlbeskeder
   - **Indstillinger** â†’ **System** â†’ **Logs**

3. **Sporing** - Se seneste kÃ¸rsler
   - Klik pÃ¥ automationen â†’ **Spor** (nederst)

4. **Test trigger manuelt**
   - **UdviklervÃ¦rktÃ¸jer** â†’ **Tilstande** â†’ Ã†ndr entity tilstand
</Aside>

## ğŸ“š Nyttige trigger-typer

| Trigger | HvornÃ¥r | Eksempel |
|---------|---------|----------|
| `state` | Entity Ã¦ndrer tilstand | BevÃ¦gelse, dÃ¸r Ã¥bner |
| `numeric_state` | VÃ¦rdi over/under | Temperatur, strÃ¸mforbrug |
| `sun` | Solopgang/nedgang | Lys automation |
| `time` | Bestemt klokkeslÃ¦t | Morgenrutine |
| `zone` | Person ankommer/forlader | Hjemme/vÃ¦k |
| `device` | Enhedsspecifik | Knap trykkes |

## ğŸš€ NÃ¦ste skridt

<CardGrid>
  <Card title="ğŸ“¡ Zigbee sensorer" icon="setting">
    TilfÃ¸j Aqara, IKEA og andre Zigbee sensorer.
    
    [OpsÃ¦t Zigbee2MQTT â†’](/da/home-assistant/zigbee2mqtt/)
  </Card>
  <Card title="ğŸ”§ ESP32 sensorer" icon="rocket">
    Byg dine egne sensorer med ESP32.
    
    [ESP32 guides â†’](/da/esp32/)
  </Card>
</CardGrid>
