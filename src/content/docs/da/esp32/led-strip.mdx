---
title: LED Strip med ESP32
description: Styr adresserbare LED strips med ESP32 og ESPHome. RGB effekter og Home Assistant integration.
sidebar:
  badge:
    text: Sjovt
    variant: note
---

import { Steps, Aside, Card, CardGrid, Tabs, TabItem, Badge } from '@astrojs/starlight/components';

<Badge text="Medium" variant="caution" /> <Badge text="45 min" variant="note" /> <Badge text="150 kr" variant="caution" />

<img src="/images/guides/led-strip/hero.jpg" alt="LED strip belysning" style="border-radius: 12px; margin-bottom: 1.5rem;" />

Adresserbare LED strips giver fantastiske lys-effekter. Hver LED kan styres individuelt med millioner af farver!

## üìã Foruds√¶tninger

- ‚úÖ [ESP32 sat op med ESPHome](/da/esp32/kom-godt-i-gang/)
- ‚úÖ Loddekolbe (eller strips med stik)
- ‚úÖ 5V str√∏mforsyning (mindst 3A)

## üõí Komponenter

| Del | Beskrivelse | Pris ca. |
|-----|-------------|----------|
| ESP32 DevKit | WiFi mikrocontroller | 45 kr |
| WS2812B LED strip | 1m, 60 LEDs/m | 60 kr |
| 5V str√∏mforsyning | Mindst 3A | 50 kr |
| Ledninger | Til str√∏m + signal | 10 kr |
| **Total** | | **~165 kr** |

<Aside type="caution" title="‚ö° Str√∏mforsyning er vigtig!">
LED strips bruger MEGET str√∏m:
- 60 LEDs fuld hvid = ~3.6A
- 144 LEDs fuld hvid = ~8.6A

**Brug IKKE USB** - det kan max levere 0.5-1A. K√∏b en dedikeret 5V str√∏mforsyning.
</Aside>

## üé® LED Strip typer

| Type | Farver | Anbefalet |
|------|--------|-----------|
| **WS2812B** | RGB (16M farver) | ‚≠ê God til de fleste |
| **SK6812** | RGBW (med √¶gte hvid) | ‚≠ê‚≠ê Bedre hvid |
| **WS2811** | RGB (12V version) | Lange strips |

## üîå Tilslutning

### Wiring diagram

![LED Strip til ESP32 wiring diagram](/images/guides/led-strip/wiring.svg)

<Steps>
1. **5V** fra str√∏mforsyning ‚Üí LED strip **+5V**
   
   <Aside type="danger">
   Forbind IKKE 5V til ESP32! Den f√•r str√∏m fra USB.
   </Aside>

2. **GND** fra str√∏mforsyning ‚Üí LED strip **GND** OG ESP32 **GND**
   
   <Aside type="caution">
   F√¶lles GND er **kritisk**! Uden det virker data-signalet ikke.
   </Aside>

3. **GPIO16** fra ESP32 ‚Üí LED strip **DIN** (Data In)
</Steps>

## ‚öôÔ∏è ESPHome Konfiguration

<Tabs>
  <TabItem label="Simpel">
    ```yaml title="led-strip.yaml"
    esphome:
      name: led-strip
      friendly_name: LED Strip

    esp32:
      board: esp32dev

    logger:
    api:
      encryption:
        key: "din-n√∏gle"
    ota:
      platform: esphome

    wifi:
      ssid: "dit-wifi"
      password: "din-kode"

    # LED Strip
    light:
      - platform: neopixelbus
        type: GRB
        variant: WS2812
        pin: GPIO16
        num_leds: 60
        name: "LED Strip"
    ```
  </TabItem>
  <TabItem label="Med effekter">
    ```yaml title="led-strip.yaml" {20-40}
    esphome:
      name: led-strip
      friendly_name: LED Strip

    esp32:
      board: esp32dev

    logger:
    api:
      encryption:
        key: "din-n√∏gle"
    ota:
      platform: esphome

    wifi:
      ssid: "dit-wifi"
      password: "din-kode"

    # LED Strip med effekter
    light:
      - platform: neopixelbus
        type: GRB
        variant: WS2812
        pin: GPIO16
        num_leds: 60
        name: "LED Strip"
        effects:
          - rainbow:
              name: "Regnbue"
              speed: 10
              width: 50
          - pulse:
              name: "Puls"
              min_brightness: 20%
              max_brightness: 100%
          - color_wipe:
              name: "Farve Sweep"
          - strobe:
              name: "Strobe"
              colors:
                - state: true
                  duration: 50ms
                - state: false
                  duration: 50ms
    ```
  </TabItem>
  <TabItem label="RGBW (SK6812)">
    ```yaml title="led-strip-rgbw.yaml"
    light:
      - platform: neopixelbus
        type: GRBW
        variant: SK6812
        pin: GPIO16
        num_leds: 60
        name: "LED Strip RGBW"
    ```
  </TabItem>
</Tabs>

<Aside type="tip" title="Farver√¶kkef√∏lge (GRB/RGB)">
Hvis farverne er forkerte (f.eks. r√∏d viser gr√∏n), pr√∏v at √¶ndre `type:` fra `GRB` til `RGB` eller `BRG`.
</Aside>

## üì§ Upload og Test

<Steps>
1. Klik **INSTALL** ‚Üí **Wirelessly**

2. G√• til **Home Assistant** ‚Üí **Oversigt**

3. Find din LED strip og t√¶nd den

4. Pr√∏v at √¶ndre farve og v√¶lg effekter
</Steps>

## üéõÔ∏è Dashboard Kort

### Simpelt lys-kort

```yaml title="Lovelace"
type: light
entity: light.led_strip
name: LED Strip
```

### Med effekt-v√¶lger

```yaml title="Lovelace"
type: vertical-stack
cards:
  - type: light
    entity: light.led_strip
  - type: entities
    entities:
      - entity: light.led_strip
        type: custom:slider-entity-row
        attribute: brightness
      - entity: select.led_strip_effect
```

## ü§ñ Automation id√©er

### T√¶nd ved solnedgang

```yaml title="automations.yaml"
automation:
  - alias: "Ambient lys ved solnedgang"
    trigger:
      - platform: sun
        event: sunset
    action:
      - service: light.turn_on
        target:
          entity_id: light.led_strip
        data:
          brightness_pct: 50
          rgb_color: [255, 180, 100]  # Varm hvid
```

### R√∏d ved alarm

```yaml title="automations.yaml"
automation:
  - alias: "R√∏d alarm"
    trigger:
      - platform: state
        entity_id: alarm_control_panel.home
        to: "triggered"
    action:
      - service: light.turn_on
        target:
          entity_id: light.led_strip
        data:
          effect: "Strobe"
          rgb_color: [255, 0, 0]
```

## üîÑ Alternativ: WLED

WLED er firmware med 100+ effekter og webapp:

| Feature | ESPHome | WLED |
|---------|---------|------|
| Effekter | ~10 | 100+ |
| Web UI | Nej | Ja |
| Musik sync | Nej | Ja |
| HA integration | Perfekt | God |
| Ops√¶tning | YAML | Web |

<Aside type="tip">
Vil du have WLED? Flash det via [install.wled.me](https://install.wled.me) direkte i browseren! Se [WLED p√• GitHub](https://github.com/Aircoookie/WLED) for dokumentation.
</Aside>

## üîß Fejlfinding

<Aside type="tip" title="LEDs lyser ikke?">
- Tjek at GND er forbundet mellem ESP32 og str√∏mforsyning
- Tjek at str√∏mforsyning er t√¶ndt
- Pr√∏v kun de f√∏rste 10 LEDs (reducer `num_leds`)
- Tjek at DIN (ikke DOUT) er forbundet
</Aside>

<Aside type="tip" title="Forkerte farver?">
- √Ündre `type:` mellem `GRB`, `RGB`, `BRG`
- WS2812B er typisk GRB
- SK6812 kan v√¶re GRBW eller RGBW
</Aside>

<Aside type="tip" title="Flimren eller random farver?">
- F√¶lles GND mangler - forbind ESP32 GND til str√∏mforsyning GND
- D√•rligt signal - pr√∏v kortere kabel til DIN
- For lang strip - injicer 5V i midten af strippen
</Aside>

## üöÄ N√¶ste skridt

<CardGrid>
  <Card title="üö∂ Bev√¶gelsessensor" icon="rocket">
    T√¶nd LED strip ved bev√¶gelse.
    
    [Byg bev√¶gelsessensor ‚Üí](/da/esp32/bevaegelsessensor/)
  </Card>
  <Card title="ü§ñ Automationer" icon="setting">
    Avancerede automationer i Home Assistant.
    
    [L√¶r automationer ‚Üí](/da/home-assistant/foerste-automation/)
  </Card>
</CardGrid>
